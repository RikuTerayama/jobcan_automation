<!DOCTYPE html>
<html lang="ja">
<head>
    {% set page_title = 'Web/SEOユーティリティガイド | Automation Hub' %}
    {% include 'includes/head_meta.html' %}
    {% block description_meta %}
        <meta name="description" content="Web/SEOユーティリティの使い方ガイド。OGP画像生成、PageSpeedチェックリスト、メタタグ検査、sitemap.xml/robots.txt生成の方法を詳しく解説。">
    {% endblock %}
    <style>
        body { font-family: 'Noto Sans JP', 'Helvetica Neue', 'Segoe UI', sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #121212 0%, #1A1A1A 50%, #0F0F0F 100%); min-height: 100vh; color: #FFFFFF; line-height: 1.8; }
        .container { max-width: 1000px; margin: 0 auto; background: linear-gradient(145deg, #1E1E1E 0%, #2A2A2A 100%); border-radius: 20px; padding: 50px; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5); }
        h1 { font-size: 2.5em; margin-bottom: 30px; color: #FFFFFF; }
        h2 { font-size: 1.8em; margin-top: 40px; margin-bottom: 20px; color: #FFFFFF; border-bottom: 2px solid rgba(255, 255, 255, 0.2); padding-bottom: 10px; }
        h3 { font-size: 1.4em; margin-top: 30px; margin-bottom: 15px; color: #4A9EFF; }
        p, li { color: rgba(255, 255, 255, 0.9); margin-bottom: 15px; font-size: 1.05em; }
        ul, ol { padding-left: 30px; }
        .step-box { background: rgba(74, 158, 255, 0.1); border-left: 4px solid #4A9EFF; padding: 25px; margin: 30px 0; border-radius: 8px; }
        .step-box h3 { margin-top: 0; }
        .info-box { background: rgba(40, 167, 69, 0.1); border-left: 4px solid #28A745; padding: 20px; margin: 25px 0; border-radius: 8px; }
        .warning-box { background: rgba(220, 53, 69, 0.1); border-left: 4px solid #DC3545; padding: 20px; margin: 25px 0; border-radius: 8px; }
        .tip-box { background: rgba(255, 193, 7, 0.1); border-left: 4px solid #FFC107; padding: 20px; margin: 25px 0; border-radius: 8px; }
        .nav-links { display: flex; gap: 20px; margin-top: 40px; padding-top: 30px; border-top: 1px solid rgba(255, 255, 255, 0.2); flex-wrap: wrap; }
        .nav-link { display: inline-block; padding: 15px 30px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 10px; color: #FFFFFF; text-decoration: none; transition: all 0.3s; }
        .nav-link:hover { background: rgba(255, 255, 255, 0.2); transform: translateY(-2px); }
        a { color: #4A9EFF; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    {% include 'includes/header.html' %}
    {% include 'includes/breadcrumb.html' %}
    <div class="container">
        <h1>🔍 Web/SEOユーティリティガイド</h1>
        <p><strong>できること:</strong> OGP画像生成、PageSpeedチェックリスト、メタタグ検査、sitemap.xml/robots.txt生成。OGP・チェックリスト・sitemap/robotsはブラウザ内完結。メタタグ検査はURL入力でHTML取得。URLクロール機能のみ、入力したURLをサーバー経由でアクセスしリンク一覧を返します。</p>
        <p><strong>想定ユーザー:</strong> Webマスター、デザイナー、マーケター、開発者など、OGP・SEO・サイト構造の確認・生成が必要な方。</p>

        <h2>このツールで解決できる課題</h2>
        <ul>
            <li>SNSシェア用のOGP画像を簡単に作成したい</li>
            <li>Webサイトのメタタグが正しく設定されているか確認したい</li>
            <li>PageSpeed改善のチェックリストを作成したい</li>
            <li>sitemap.xmlやrobots.txtを生成したい</li>
        </ul>

        <h2>主要機能</h2>
        <ul>
            <li><strong>OGP画像生成</strong>: タイトル、説明、画像URLからOGP画像を生成</li>
            <li><strong>メタタグ検査</strong>: URLからHTMLを取得し、メタタグを抽出・表示</li>
            <li><strong>PageSpeedチェックリスト</strong>: パフォーマンス改善項目のチェックリストを生成</li>
            <li><strong>sitemap.xml生成</strong>: サイトマップXMLを生成</li>
            <li><strong>robots.txt生成</strong>: robots.txtファイルを生成</li>
        </ul>

        <h2>使い方の流れ（機能別）</h2>
        <div class="step-box">
            <h3>OGP画像生成</h3>
            <ol>
                <li><a href="/tools/seo">Web/SEOユーティリティ</a>にアクセス</li>
                <li>「OGP画像生成」タブを選択</li>
                <li>タイトル、説明、背景色、画像URL（任意）を入力</li>
                <li>「OGP画像を生成」ボタンをクリック</li>
                <li>生成された画像をダウンロード</li>
            </ol>
        </div>
        <div class="step-box">
            <h3>メタタグ検査</h3>
            <ol>
                <li>「メタタグ検査」タブを選択</li>
                <li>検査したいURLを入力</li>
                <li>「HTMLを取得」ボタンをクリック</li>
                <li>抽出されたメタタグを確認</li>
            </ol>
        </div>
        <div class="step-box">
            <h3>PageSpeedチェックリスト</h3>
            <ol>
                <li>「PageSpeedチェックリスト」タブを選択</li>
                <li>チェック項目を選択（画像最適化、CSS/JS最適化など）</li>
                <li>「チェックリストを生成」ボタンをクリック</li>
                <li>生成されたチェックリストをコピーまたはダウンロード</li>
            </ol>
        </div>

        <h2>入出力仕様</h2>
        <h3>OGP画像生成</h3>
        <ul>
            <li>出力形式: PNG、JPEG</li>
            <li>サイズ: 1200×630px（推奨）</li>
        </ul>
        <h3>メタタグ検査</h3>
        <ul>
            <li>入力: URL</li>
            <li>出力: メタタグ一覧（HTML形式）</li>
        </ul>

        <div class="warning-box">
            <strong>⚠️ メタタグ検査の制限</strong>
            <p>メタタグ検査は、対象サイトのCORS（Cross-Origin Resource Sharing）設定によっては失敗する場合があります。CORSエラーが発生した場合は、HTMLを直接貼り付けて検査してください。</p>
        </div>

        <div class="warning-box">
            <strong>⚠️ その他の制限</strong>
            <ul style="margin-top: 10px;">
                <li>メタタグ検査は対象サイトのCORS設定に依存します</li>
                <li>URLクロール: 1分に1回まで（IPあたり）。最大URL数1〜1000、深さ0〜10（<code>app.py</code> 889–890行）</li>
                <li>OGP画像生成はブラウザ内で完結しますが、外部画像URLはCORSで読み込めない場合があります</li>
            </ul>
        </div>

        <h2 id="data-handling">データの取り扱い</h2>
        <p>OGP画像・PageSpeedチェックリスト・sitemap/robots生成はすべてブラウザ内で完結し、当サーバーへデータは送信されません。</p>
        <ul>
            <li><strong>OGP・チェックリスト・sitemap/robots</strong>: ブラウザ内のみ。根拠: <code>templates/tools/seo.html</code> および関連JSで完結。アップロードルートなし。</li>
            <li><strong>メタタグ検査（URL入力）</strong>: ブラウザから対象URLへ直接アクセスするため、当サーバーを経由しません。CORSで取得できない場合はHTML貼り付けで検査できます。</li>
            <li><strong>URLクロール機能</strong>: 入力した開始URLが当サーバーに送信され、サーバー側でそのURLへHTTP GETしてリンクを収集し、URL一覧をJSONで返します。収集したURLはレスポンスとして返すのみで、当サーバーに保存しません。根拠: <code>app.py</code> 850–896行、<code>lib/seo_crawler.py</code> の <code>crawl()</code>。SSRF対策のため許可ホスト・URL制限あり。</li>
        </ul>
        <p>詳細は<a href="/privacy">プライバシーポリシー</a>をご確認ください。</p>

        <h2 id="faq">よくある質問（FAQ）</h2>
        {% set faq_list = [
            {"q": "OGP画像を自動生成できますか？", "a": "はい。タイトル・サブタイトル・背景色などを入力し、ブラウザ内で1200×630pxのOGP画像を生成できます。サーバーには送信されません。"},
            {"q": "sitemap.xmlを生成できますか？", "a": "はい。sitemap/robotsタブで開始URLを入力し、URL一覧を取得したうえで、ブラウザ内でsitemap.xml/robots.txtを生成・ダウンロードできます。URLクロールを使う場合は開始URLがサーバー経由でアクセスされますが、収集結果は保存されません。"},
            {"q": "メタタグ検査でCORSエラーが出ます。", "a": "対象サイトがCORSを許可していないとブラウザから取得できません。その場合は「HTMLを貼り付けて検査」でHTMLを直接貼り付けてメタタグを確認してください。"},
            {"q": "URLクロールでサーバーにデータが保存されますか？", "a": "いいえ。開始URLでサーバーがHTTP GETしてリンクを収集し、結果のURL一覧をJSONで返すのみです。保存・ログ蓄積は行いません（app.py 850–896行、lib/seo_crawler.py）。"},
            {"q": "OGP画像の背景画像が表示されません。", "a": "外部画像URLはCORSで読み込めない場合があります。画像をダウンロードしてローカルで指定するか、背景色のみで作成してください。"},
            {"q": "PageSpeedチェックリストとは？", "a": "画像最適化・CSS/JS最適化など、パフォーマンス改善のためのチェック項目を一覧化したものです。選択した項目をブラウザ内で生成し、ダウンロードできます。"},
            {"q": "クロールは何回まで使えますか？", "a": "同一IPあたり1分に1回までです。制限に達すると「しばらく待ってから再度お試しください」と表示されます（app.py 815–818行）。"},
            {"q": "どのURLがクロール対象になりますか？", "a": "入力した開始URLと同じホスト内のリンクが対象です。localhostやプライベートIPはSSRF対策で許可されません（lib/seo_crawler.py の is_url_safe_for_crawl）。"}
        ] %}
        <div class="faq-list">
            {% for item in faq_list %}
            <div class="faq-item" style="margin-bottom: 24px;">
                <h3 style="font-size: 1.1em; margin-bottom: 8px;">Q. {{ item.q }}</h3>
                <p style="margin: 0; padding-left: 1em;">A. {{ item.a }}</p>
            </div>
            {% endfor %}
        </div>

        <h2>トラブルシューティング</h2>
        <ul>
            <li><strong>「このURLは許可されていません」</strong>: クロールは同一ホスト・http/httpsのみで、localhostやプライベートIPは許可されていません。公開URLでお試しください。</li>
            <li><strong>「しばらく待ってから再度お試しください」</strong>: 1分に1回のレート制限に達しています。1分後に再度実行してください。</li>
            <li><strong>メタタグ検査で取得できない</strong>: CORSでブロックされている可能性があります。HTMLを直接貼り付けて検査する方法に切り替えてください。</li>
            <li><strong>OGP画像がダウンロードできない</strong>: ブラウザのポップアップブロックを確認してください。Canvasを右クリックして「画像を保存」でも保存できます。</li>
            <li><strong>クロール結果が空になる</strong>: 開始URLのHTMLに同一オリジンのリンクが含まれていない、またはタイムアウトの可能性があります。URLとネットワークを確認してください。</li>
        </ul>

        {% set tool_path = '/tools/seo' %}
        {% set tool_name = 'Web/SEOユーティリティ' %}
        {% include 'guide/_partials/guide_related_links.html' %}

        <div class="nav-links">
            <a href="/tools/seo" class="nav-link">← Web/SEOユーティリティに戻る</a>
            <a href="/tools" class="nav-link">← ツール一覧へ</a>
        </div>
    </div>
    {% include 'guide/_partials/guide_faq_jsonld.html' %}
    {% include 'includes/footer.html' %}
</body>
</html>
