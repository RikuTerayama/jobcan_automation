{# Google Analytics 4 (GA4) - 全ページ共通 #}
{% if GA_MEASUREMENT_ID %}
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id={{ GA_MEASUREMENT_ID }}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '{{ GA_MEASUREMENT_ID }}', {
    anonymize_ip: true
  });
</script>
{% endif %}

{# HEADの軽量化 - 必須メタのみ #}
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
{# Scroll Reveal: no-js → js 切り替え（最優先、JSが動く時だけ非表示にするため） #}
<script>
    (function() {
        document.documentElement.classList.remove('no-js');
        document.documentElement.classList.add('js');
    })();
</script>
<title>{{ page_title|default('Jobcan AutoFill - 勤怠データ自動入力ツール') }}</title>
{% block description_meta %}
<meta name="description" content="Jobcanへの勤怠データをExcelから一括入力。画像変換・PDF・SEOなど業務効率化ツールも提供。ブラウザ内処理でアップロード不要。">
{% endblock %}
<link rel="canonical" href="{{ BASE_URL|default('https://jobcan-automation.onrender.com') }}{% if request and request.path %}{{ request.path }}{% else %}/{% endif %}">
{% if GSC_VERIFICATION_CONTENT %}
<meta name="google-site-verification" content="{{ GSC_VERIFICATION_CONTENT }}" />
{% endif %}
<meta property="og:type" content="website">
<meta property="og:title" content="{{ page_title|default('Jobcan AutoFill') }}">
{% block og_description %}{% endblock %}
<meta property="og:url" content="{{ BASE_URL|default('https://jobcan-automation.onrender.com') }}{% if request and request.path %}{{ request.path }}{% else %}/{% endif %}">
{% block og_image %}
<meta property="og:image" content="{{ url_for('static', filename='JobcanAutofill.png', _external=True) }}">
{% endblock %}
{# Twitter Card - P0-2: 同一テンプレ内で block 二重定義を避ける（include 時 TemplateAssertionError 対策） #}
{% block twitter_card %}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ page_title|default('Jobcan AutoFill') }}">
<meta name="twitter:description" content="{% block twitter_description %}Jobcanへの勤怠データをExcelから一括入力する自動化ツール{% endblock %}">
<meta name="twitter:image" content="{% block twitter_image %}{{ url_for('static', filename='JobcanAutofill.png', _external=True) }}{% endblock %}">
{% endblock %}
{# AdSenseコードスニペット - サイト所有権確認のため全ページに配置 #}
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4232725615106709"
     crossorigin="anonymous"></script>
{# P1-3: フォント読み込み最適化（preconnect + display=swap） #}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
{# Common Design System CSS #}
<link rel="stylesheet" href="{{ url_for('static', filename='css/common.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/scroll-reveal.css') }}">
{# Scroll Reveal JS #}
<script src="{{ url_for('static', filename='js/scroll-reveal.js') }}" defer></script>
{# 構造化データ（Organization/WebSite/BreadcrumbList） #}
{% include 'includes/structured_data.html' %}
{% block extra_head %}{% endblock %}

